//
// Created by vm on 04.11.17.
//

#include <iomanip>
#include "FordFulkersonMaxFlow.h"
#include "MaxFlow.h"

void FordFulkersonMaxFlow::startTimeTest() {
    prepareTestData();
//    std::fstream fs = prepareFileWriter();
    for (int j = 0; j < iterations; ++j) {
        auto start = std::chrono::high_resolution_clock::now();
        fordFulkerson(graph,0,43);
        fordFulkerson(graph,1,43);
        fordFulkerson(graph,2,43);
        fordFulkerson(graph,3,43);
        fordFulkerson(graph,4,43);
        fordFulkerson(graph,5,43);
        fordFulkerson(graph,6,43);
        fordFulkerson(graph,7,43);
        fordFulkerson(graph,8,43);
        fordFulkerson(graph,9,43);
        fordFulkerson(graph,0,42);
        fordFulkerson(graph,1,41);
        fordFulkerson(graph,2,40);
        fordFulkerson(graph,3,39);
        fordFulkerson(graph,4,38);
        fordFulkerson(graph,5,37);
        fordFulkerson(graph,6,36);
        fordFulkerson(graph,7,35);
        fordFulkerson(graph,8,34);
        fordFulkerson(graph,9,33);
        diff = std::chrono::high_resolution_clock::now() - start;
//        fs << std::setprecision(0) << std::fixed << diff.count() * 1000000000 << std::endl;
//        fs.flush();
        std::cout << j << std::endl;
    }
//    fs.close();
}

void FordFulkersonMaxFlow::prepareTestData() {
//    graph = new int*[44];
//    for (int i = 0; i < 44; ++i) {
//        graph[i] = new int[44];
//    }

        int graph1[44][44] = {
            // 0    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43
//ORIG  2   3W   3E   2S  13N   13S  12   52    R   45   46   4W   4E    6   14   10   11    9    8    7    5   47   48   49   50   51    S   P7   P4   P1   P2   P5   P8    H    I    M   P9   P6   P3   E3   E2    B   EG
            {  0, 200, 200, 200, 200, 200, 200, 200, 200, 200,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // ORIG
            {  0,   0,  26,   0,  30,   0,   0,   0,   0,   0,   6,  12,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 2
            {  0,   0,  26,   6,   0,   0,   0,   0,   0,   0,   0,   2,  34,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 3W
            {  0,   0,   6,   0,   6,   0,   0,   0,   0,   0,   0,   0,   0,   4,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 3E
            {  0,  30,   0,   6,   0,  24,   0,   0,   0,   0,   0,   0,   0,  30,  24,  30,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 2S
            {  0,   0,   0,   0,  24,   0,  24,   0,   0,   0,   0,   0,   0,   0,   0,  38,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 13N
            {  0,   0,   0,   0,   0,  24,   0,  44,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 13S
            {  0,   0,   0,   0,   0,   0,  44,   0,   0,   0,   0,   0,   0,   0,   0,   0,  40,  48,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 12
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,  12,   0,   0,   0,   0,   0,   0,   0,   0,   0,  16,   4,   0,   0,   0,   0,   0,   2,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 52
            {  0,   0,   0,   0,   0,   0,   0,   0,  14,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   8,   0,   0,   0,   0,   0,   0,   0,  19,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // R
            {  0,   6,   0,   0,   0,   0,   0,   0,   0,   0,   0,   8,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 45
            {  0,  12,   2,   0,   0,   0,   0,   0,   0,   0,   8,   0,  24,   0,   0,   0,   0,   0,   0,   0,   0,   0,  20,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 46
            {  0,   0,  34,   0,   0,   0,   0,   0,   0,   0,   0,  24,   0,  54,   0,   0,   0,   0,   0,   0,   0,  41,   0,  30,  30,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 4W
            {  0,   0,   0,   0,  30,   0,   0,   0,   0,   0,   0,   0,  54,   0,  16,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 4E
            {  0,   0,   0,   0,  30,   0,   0,   0,   0,   0,   0,   0,   0,  16,   0,  24,  34,   0,   0,   0,  34,  52,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 6
            {  0,   0,   0,   0,  30,  38,   0,   0,   0,   0,   0,   0,   0,   0,  24,   0,  30,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 14
            {  0,   0,   0,   0,   0,   0,   0,  40,   0,   0,   0,   0,   0,   0,  34,  30,   0,  30,  40,  10,  10,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 10
            {  0,   0,   0,   0,   0,   0,   0,  48,   0,   0,   0,   0,   0,   0,   0,   0,  30,   0,  26,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 11
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  40,  26,   0,  44,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 9
            {  0,   0,   0,   0,   0,   0,   0,   0,  16,   0,   0,   0,   0,   0,   0,   0,  10,   0,  44,   0,  50,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 8
            {  0,   0,   0,   0,   0,   0,   0,   0,   4,   0,   0,   0,   0,   0,  34,   0,  10,   0,   0,  50,   0,  38,   0,   0,   0,  34,  28,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 7
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  41,   0,  52,   0,   0,   0,   0,   0,  38,   0,   0,   0,  12,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 5
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  20,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  32,   0,   0,   0,   0,   0,  36,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 47
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  30,   0,   0,   0,   0,   0,   0,   0,   0,   0,  32,   0,  22,   0,   0,   0,   0,   0,  32,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 48
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  30,   0,   0,   0,   0,   0,   0,   0,   0,  12,   0,  22,   0,  17,   0,   0,   0,  36,   2,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 49
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  34,   0,   0,   0,  17,   0,  28,   0,   0,  17,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 50
            {  0,   0,   0,   0,   0,   0,   0,   0,   2,   8,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  28,   0,   0,   0,   0,  28,   0,  10,  29,   0,   0,   0,   0,   0,   5,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // 51
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  10,   0,   6,   0,   0,   0,   0,   0,  20,   0,  24,   0,   0,   0,   0,   0,   0,   0}, // S
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  29,   6,   0,  20,   0,   0,   0,  24,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // P7
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  36,  17,   0,   0,  20,   0,  33,  17,  36,  16,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // P4
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  36,  32,   2,   0,   0,   0,   0,  33,   0,  30,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}, // P1
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  17,  30,   0,  20,   0,   0,   0,   0,   0,  29,  29,   0,   0,   0,   0}, // P2
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  36,   0,  20,   0,  37,   0,   0,   0,  25,  60,   0,   0,   0,   0,   0}, // P5
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  24,  16,   0,   0,  37,   0,   0,   0,  27,  53,   0,   0,   0,   0,   0,   0}, // P8
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,  19,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   5,  20,   0,   0,   0,   0,   0,   0,   0,  16,   0,   0,   0,   0,   0,   0,   0,   0}, // H
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  16,   0,  13,   0,   0,   0,  10,  14,  10,   0}, // I
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  24,   0,   0,   0,   0,   0,  27,   0,  13,   0,   3,   0,   0,   0,   0,  23,   0}, // M
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  25,  53,   0,   0,   3,   0,  19,   0,   0,   0,  10,  32}, // P9
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  29,  60,   0,   0,   0,   0,  19,   0,  16,   0,   0,   0,  49}, // P6
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  23,   0,   0,   0,   0,   0,   0,  16,   0,   0,   0,   0,  16}, // P3
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  10,   0,   0,   0,   0,   0,   8,   0,  10}, // E3
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  14,   0,   0,   0,   0,   8,   0,   2,  19}, // E2
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,  10,  23,  10,   0,   0,   0,   2,   0,  29}, // B
            {  0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0}  // EG
    };
    for (int j = 0; j < 44; ++j) {
        for (int i = 0; i < 44; ++i) {
            graph[j][i] = graph1[j][i];
        }
    }

}

FordFulkersonMaxFlow::FordFulkersonMaxFlow(const string &fileName, int iterations) : Algorithm(fileName, iterations) {}
